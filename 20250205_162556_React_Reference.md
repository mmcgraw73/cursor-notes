# React Reference
## React Patterns

### Testing Boilerplate
```typescript
import { render, screen } from '@testing-library/react'
import userEvent from '@testing-library/user-event'
import { describe, it, expect, vi } from 'vitest'

describe('Component', () => {
  it('renders correctly', () => {
    render(<Component />)
    expect(screen.getByRole('button')).toBeInTheDocument()
  })
})
```

### Custom Hook Template
```typescript
import { useState, useEffect } from 'react'

interface UseCustomHookProps {
  initialValue: string
}

export const useCustomHook = ({ initialValue }: UseCustomHookProps) => {
  const [value, setValue] = useState(initialValue)
  
  useEffect(() => {
    // Effect logic
  }, [])

  return { value, setValue }
}
```

### API Integration
```typescript
import { createApi, fetchBaseQuery } from '@reduxjs/toolkit/query/react'

export const api = createApi({
  baseQuery: fetchBaseQuery({ 
    baseUrl: '/api',
    credentials: 'include',
  }),
  endpoints: (builder) => ({
    getData: builder.query({
      query: () => 'data',
    }),
  }),
})

export const { useGetDataQuery } = api
```

### Context with useReducer Pattern
```typescript
import { createContext, useContext, useReducer } from 'react'

const AppContext = createContext()

const initialState = {
  user: null,
  theme: 'light',
  settings: {}
}

function reducer(state, action) {
  switch (action.type) {
    case 'SET_USER':
      return { ...state, user: action.payload }
    case 'TOGGLE_THEME':
      return { ...state, theme: state.theme === 'light' ? 'dark' : 'light' }
    default:
      return state
  }
}

export function AppProvider({ children }) {
  const [state, dispatch] = useReducer(reducer, initialState)
  return (
    <AppContext.Provider value={{ state, dispatch }}>
      {children}
    </AppContext.Provider>
  )
}

export function useApp() {
  const context = useContext(AppContext)
  if (!context) throw new Error('useApp must be used within AppProvider')
  return context
}
```

### Compound Component Pattern
```typescript
import { createContext, useState, useContext } from 'react'

const TabsContext = createContext()

export function Tabs({ children, defaultTab }) {
  const [activeTab, setActiveTab] = useState(defaultTab)
  return (
    <TabsContext.Provider value={{ activeTab, setActiveTab }}>
      <div className="tabs">{children}</div>
    </TabsContext.Provider>
  )
}

Tabs.Header = function TabHeader({ children }) {
  return <div className="tabs-header">{children}</div>
}

Tabs.Panel = function TabPanel({ children, tabId }) {
  const { activeTab } = useContext(TabsContext)
  if (activeTab !== tabId) return null
  return <div className="tab-panel">{children}</div>
}
```

### Custom Store Hook
```typescript
import { useState, useCallback } from 'react'

export function useStore(initialState = {}) {
  const [state, setState] = useState(initialState)

  const actions = {
    updateUser: useCallback((user) => {
      setState(prev => ({ ...prev, user }))
    }, []),
    updateSettings: useCallback((settings) => {
      setState(prev => ({ ...prev, settings }))
    }, []),
    reset: useCallback(() => {
      setState(initialState)
    }, [])
  }

  return [state, actions]
}
```